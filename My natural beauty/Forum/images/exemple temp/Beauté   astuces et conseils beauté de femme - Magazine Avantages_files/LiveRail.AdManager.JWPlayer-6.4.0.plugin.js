/*!

   LiveRail Plugin for JW Player 6.4.0
   Build Date: Wed, 24 Jul 2013 10:35:47 -0700

*/
(function(){var g,f,e,d,h,b,c;if(window.LiveRail===undefined){window.LiveRail={}}if(window.LiveRail.Framework!==undefined){return}window.LiveRail.Framework={widget:{}};window.LiveRail.Framework.build={version:"1.1",timestamp:"201307241017",date:"Wed, Jul 24, 2013 10:17:47 -0700"};e=[];g={};(function(){var i={Array:{},Date:{},Object:{}};if(window.Array&&window.Array.isArray!==undefined){i.Array.isArray=window.Array.isArray}else{i.Array.isArray=function(j){return(Object.prototype.toString.call(j)==="[object Array]")}}if(window.Date&&window.Date.now!==undefined){i.Date.now=window.Date.now}else{i.Date.now=function(){return(new Date()).getTime()}}if(window.Object&&window.Object.defineProperties!==undefined){i.Object.defineProperties=window.Object.defineProperties}else{i.Object.defineProperties=function(l,k){var j;if(l&&typeof l==="object"&&k&&typeof k==="object"){for(j in k){if(k.hasOwnProperty(j)&&k[j].hasOwnProperty("value")){l[j]=k[j].value}}}}}if(window.Object&&window.Object.create!==undefined){i.Object.create=window.Object.create}else{i.Object.create=function(m,l){var j,k;j=function(){};if(m){j.prototype=m}k=new j();if(l&&typeof l==="object"){i.Object.defineProperties(k,l)}return k}}if(window.Object&&window.Object.keys!==undefined){i.Object.keys=window.Object.keys}else{i.Object.keys=(function(){var l=window.Object.prototype.hasOwnProperty,m=!({toString:null}).propertyIsEnumerable("toString"),k=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],j=k.length;return function(p){var o,n,q;if((typeof p!=="object"&&typeof p!=="function")||p===null){throw new TypeError("Object.keys called on non-object")}n=[];for(q in p){if(p.hasOwnProperty(q)){n.push(q)}}if(m){for(o=0;o<j;o+=1){if(p.hasOwnProperty(k[o])){n.push(k[o])}}}return n}}())}if(window.Object&&window.Object.freeze!==undefined){i.Object.seal=window.Object.seal;i.Object.freeze=window.Object.freeze}else{i.Object.seal=function(){};i.Object.freeze=function(){}}i.Object.freeze(i.Array);i.Object.freeze(i.Date);i.Object.freeze(i.Object);i.Object.freeze(i);i.Object.defineProperties(g,{es5:{value:i,enumerable:true}})}());function a(){if(h===undefined){h=0}h+=1;return h}f=function(){if(typeof window.console!=="object"||c===0){return}var k,m,r,j,p,l,n,o;k=this.context;m=(this===window);n=new Date();r=this.priority;if(!k.is_int(r)){r=3}j=this.method;if(typeof j!=="string"){j="log"}p=[""];for(l=0;l<arguments.length;l+=1){p.push(arguments[l])}if(c===undefined){if(document.location.href.match(/^https?:\/\/[A-Za-z0-9.\-_]+\.liverail\.com/)){c=parseInt(k.readCookie().debug,10);if(!c){c=0}b=k.readCookie().debugIdFilter;if(b){b=decodeURIComponent(k.readCookie().debugIdFilter)}}else{if(typeof window.LiveRail==="object"&&window.LiveRail.debugOutput!==undefined){c=parseInt(window.LiveRail.debugOutput,10);b=window.LiveRail.debugIdFilter||""}}}o={context:k,priority:r,timestamp:n,method:j,args:p};if(c===undefined){e.push(o);return}function q(v){var t,i,w,u,s;i=v.context.id&&v.context.id.fullname?v.context.id.fullname:"";if(c<v.priority){return}t="";if(!m&&v.context&&v.context.id){t=v.context.id.fullname;if(c>2&&t){t+=" "+v.context.id.instance}}v.args[0]="LIVERAIL ["+k.date("H:i:s.",v.timestamp)+k.date("u",v.timestamp).substr(0,3)+"]";if(typeof window.LiveRail==="object"&&!window.LiveRail.debugFilterMessage&&b){window.LiveRail.debugFilterMessage=true;if(typeof window.console.warn==="function"){window.console.warn(v.args[0],'Debug ID Filter set to "'+b+'"')}}if(!i.match(new RegExp(b))){return}if(t){v.args[0]+="["+t+"]"}if(v.method!=="purge"){if(typeof window.LiveRail.debugElement==="object"&&window.LiveRail.debugElement!==null&&window.LiveRail.debugElement.tagName){w=document.createElement("div");u="";if(window.LiveRail.debugElement.offsetHeight===window.LiveRail.debugElement.scrollHeight||(window.LiveRail.debugElement.scrollTop+window.LiveRail.debugElement.offsetHeight)>=(window.LiveRail.debugElement.scrollHeight-2)){s=true}o.context.each(v.args,function(x){if(u.length>0){u+=" "}u+=x});w.innerHTML=u;window.LiveRail.debugElement.appendChild(w);if(s){window.LiveRail.debugElement.scrollTop=window.LiveRail.debugElement.scrollHeight}}if(typeof window.console[v.method]==="function"){window.console[v.method].apply(window.console,v.args)}}}if(e.length>0){for(l=0;l<e.length;l+=1){q(e[l])}e=[]}if(Function.prototype.bind&&window.console&&typeof window.console.log==="object"){["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(i){window.console[i]=this.bind(window.console[i],window.console)},Function.prototype.call)}q(o)};g.es5.Object.defineProperties(g,{info:{value:function(){f.apply({context:this,priority:1,method:"info"},arguments)},enumerable:true},warn:{value:function(){f.apply({context:this,priority:1,method:"warn"},arguments)},enumerable:true},error:{value:function(){f.apply({context:this,priority:1,method:"error"},arguments)},enumerable:true},debug:{value:function(){f.apply({context:this,priority:2,method:"log"},arguments)},enumerable:true},log:{value:function(){f.apply({context:this,priority:1},arguments)},enumerable:true},verbose:{value:function(){f.apply({context:this,priority:3},arguments)},enumerable:true}});g.es5.Object.defineProperties(g,{date:{value:function(q,o){var k,p,n,j=/\\?([a-z])/gi,i,l=function(s,r){s=s.toString();return s.length<r?l("0"+s,r,"0"):s},m=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"];i=function(r,u){return n[r]?n[r]():u};n={d:function(){return l(n.j(),2)},D:function(){return n.l().slice(0,3)},j:function(){return p.getDate()},l:function(){return m[n.w()]+"day"},N:function(){return n.w()||7},S:function(){var r=n.j();return r<4|r>20&&(["st","nd","rd"][r%10-1]||"th")},w:function(){return p.getDay()},z:function(){var s=new Date(n.Y(),n.n()-1,n.j()),r=new Date(n.Y(),0,1);return Math.round((s-r)/86400000)+1},W:function(){var s=new Date(n.Y(),n.n()-1,n.j()-n.N()+3),r=new Date(s.getFullYear(),0,4);return l(1+Math.round((s-r)/86400000/7),2)},F:function(){return m[6+n.n()]},m:function(){return l(n.n(),2)},M:function(){return n.F().slice(0,3)},n:function(){return p.getMonth()+1},t:function(){return(new Date(n.Y(),n.n(),0)).getDate()},L:function(){var r=n.Y();return r%4===0&r%100!==0|r%400===0},o:function(){var t=n.n(),r=n.W(),s=n.Y();return s+(t===12&&r<9?1:t===1&&r>9?-1:0)},Y:function(){return p.getFullYear()},y:function(){return n.Y().toString().slice(-2)},a:function(){return p.getHours()>11?"pm":"am"},A:function(){return n.a().toUpperCase()},B:function(){var t=p.getUTCHours()*3600,r=p.getUTCMinutes()*60,u=p.getUTCSeconds();return l(Math.floor((t+r+u+3600)/86.4)%1000,3)},g:function(){return n.G()%12||12},G:function(){return p.getHours()},h:function(){return l(n.g(),2)},H:function(){return l(n.G(),2)},i:function(){return l(p.getMinutes(),2)},s:function(){return l(p.getSeconds(),2)},u:function(){return l(p.getMilliseconds()*1000,6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var s=new Date(n.Y(),0),u=Date.UTC(n.Y(),0),r=new Date(n.Y(),6),t=Date.UTC(n.Y(),6);return((s-u)!==(r-t))?1:0},O:function(){var s=p.getTimezoneOffset(),r=Math.abs(s);return(s>0?"-":"+")+l(Math.floor(r/60)*100+r%60,4)},P:function(){var r=n.O();return(r.substr(0,3)+":"+r.substr(3,2))},T:function(){return"UTC"},Z:function(){return -p.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(j,i)},r:function(){return"D, d M Y H:i:s O".replace(j,i)},U:function(){return p/1000|0}};k=function(s,r){p=(r===undefined?new Date():(r instanceof Date)?new Date(r):new Date(r*1000));return s.replace(j,i)};return k(q,o)},enumerable:true},detect:{value:function(j){var i={};if(typeof j==="object"&&typeof j.feature==="string"){i.feature=j.feature.replace(/^\s\s*/,"").replace(/\s\s*$/,"").toLowerCase();switch(i.feature){case"flash":i.present=false;(function(){var l,k,n;if(window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0){l="application/x-shockwave-flash";k=window.navigator.mimeTypes;if(k&&k[l]&&k[l].enabledPlugin&&k[l].enabledPlugin.description){i.present=true}}else{if(window.ActiveXObject!==undefined){try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(m){n={activeXError:true}}if(!n.activeXError){i.present=true}}}}());break;case"html5":i.present=!!document.createElement("video").canPlayType;break;case"svg":if(document.implementation&&document.implementation.hasFeature){i.present=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}else{i.present=false}break}return i}},enumerable:true},each:{value:function(j,l){var k,n,m;if(j&&typeof l==="function"){if(j.length!==undefined){n=j.length;for(k=0;k<n;k+=1){if(l(j[k],k)===false){break}}return}m=g.es5.Object.keys(j);n=m.length;for(k=0;k<n;k+=1){if(l(j[m[k]],m[k])===false){break}}}},enumerable:true},eachKey:{value:function(i,j){this.each(i,function(l,k){if(typeof j==="function"){return j(k,l)}})},enumerable:true},gmdate:{value:function(k,j){var i=j===undefined?new Date():typeof j==="object"?new Date(j):new Date(j*1000);j=Date.parse(i.toUTCString().slice(0,-4))/1000;return this.date(k,j)},enumerable:true},is_int:{value:function(i){return i===+i&&isFinite(i)&&i%1===0},enumerable:true},readCookie:{value:function(){var m,l,j={},k;k=document.cookie.split("; ");for(l=0;l<k.length;l+=1){m=k[l].split("=");if(m[1]!==undefined){j[m[0]]=decodeURIComponent(m[1])}else{j[m[0]]=""}}return j},enumerable:true}});d=function(i,j){var l;if(!i){return null}function k(m){return function(){var n="";function o(p){if(p.id&&p.id.name&&p.id.name.substr(0,10)!=="Framework."){if(n.length>0){n="."+n}n=p.id.name+n}if(p.id.parent){o(p.id.parent)}}o(m);return n}}l=g.es5.Object.create(g,{id:{value:{},enumerable:true},descendent:{value:function(p,o){var n,m;n=g.es5.Object.create(this,o);m=this;g.es5.Object.defineProperties(n,{id:{value:{}}});g.es5.Object.defineProperties(n.id,{name:{value:p},instance:{value:a()},parent:{value:m},fullname:{get:k(n)}});n.verbose("New descendent of "+n.id.parent.id.fullname,n);return n},enumerable:true}});if(j&&typeof j==="object"){g.es5.Object.defineProperties(l,j)}g.es5.Object.defineProperties(l.id,{name:{value:i,enumerable:true},instance:{value:a(),enumerable:true},fullname:{get:k(l),enumerable:true}});l.verbose("New descendent of window.LiveRail.Framework",l);return l};f.apply({context:g,priority:2,method:"log"},["LiveRail.Framework version "+window.LiveRail.Framework.build.version+", build "+window.LiveRail.Framework.build.timestamp+" ("+window.LiveRail.Framework.build.date+")"]);window.LiveRail.Framework.messageQueue={};g.es5.Object.defineProperties(window.LiveRail.Framework.messageQueue,{purge:{value:function(){f.apply({context:g,priority:1,method:"purge"})},enumerable:true}});window.LiveRail.Framework.descendent=d;if(window.LiveRail.onFrameworkLoad){g.each(window.LiveRail.onFrameworkLoad,function(i){if(typeof i==="function"){i()}});delete window.LiveRail.onFrameworkLoad}}());(function(){var e,a,d={};function c(h){var k,j,f,g,l;if(!h){h=window.event}if(!h.origin.match(/^https?:\/\/cdn-static(-secure)?\.liverail\.com/)){return}if(!h.data||typeof h.data!=="string"||h.data.substr(0,20)!=="lrHandshakeResponse="){return}k=h.data.substr(20);j="";for(f=0;f<k.length;f+=1){j+=String.fromCharCode(k.charCodeAt(f)-a.charCodeAt(f))}g=j.split("&");for(f=0;f<g.length;f+=1){l=g[f].split("=");if(l[1]){switch(l[1]){case"true":d[l[0]]=true;break;case"false":d[l[0]]=false;break;default:d[l[0]]=decodeURIComponent(l[1]);break}}}if(e&&e.parentNode===document.body){document.body.removeChild(e)}if(d.debug!==undefined){window.LiveRail.debugOutput=parseInt(d.debug,10);window.LiveRail.debugIdFilter=d.debugIdFilter;if(window.LiveRail.Framework.messageQueue){window.LiveRail.Framework.messageQueue.purge()}}}function b(){var f,h,g;if(typeof window.postMessage!=="function"){return}if(window.location.protocol==="https:"||(window.location.protocol!=="http:"&&window.parent&&window.parent.location.protocol==="https:")){h=true}f=h?"https://cdn-static-secure.liverail.com/js/handshake.html":"http://cdn-static.liverail.com/js/handshake.html";a="";for(g=0;g<50;g+=1){a+=Math.random().toString(36).substr(2,5)}e=document.createElement("iframe");e.style.display="none";e.src=f;document.body.appendChild(e);e.onload=function(){if(e.contentWindow&&e.contentWindow.postMessage){e.contentWindow.postMessage(a,f)}else{if(e&&e.parentNode===document.body){document.body.removeChild(e)}}};if(window.addEventListener){window.addEventListener("message",c,false)}else{if(window.attachEvent){window.attachEvent("onmessage",c)}}}if(window.LiveRail.debugOutput===undefined&&!document.location.href.match(/^https?:\/\/[A-Za-z0-9.\-_]+\.liverail\.com/)){if(document.readyState!=="complete"||document.body===null){if(window.addEventListener){window.addEventListener("load",b,false)}else{if(window.attachEvent){window.attachEvent("onload",b)}}}else{b()}}}());(function(){LiveRail.AdMap=function(){var c,j,o,s,e,u=false,p=true,l=1.5,r,d,t,g,a,m,k,n,q,h,f,b;c=LiveRail.Framework.descendent("AdMap");n=function(B){var D,y,z,w,C,v,x,i,A,E;s=0;e=0;r=undefined;d=undefined;t=undefined;g=undefined;a={};j=false;if(B){D=B.toLowerCase().split(";");c.log("Init AdMap with slots",D);for(o=0;o<D.length;o+=1){y=D[o].split(":");if(y.length>=3){z=y[2].split(",");C=(z.length>0?z[0]:undefined);i=(z.length>1?z[1]:undefined);v=(C!==undefined&&C.length>0?parseFloat(C):undefined);A=(i!==undefined&&i.length>0?parseFloat(i):undefined);x=(C!==undefined&&C.indexOf("%")>=0?true:false);E=(i!==undefined&&i.indexOf("%")>=0?true:false);if(v>=0){w={};w.type=y[0];w.scenario=y[1];w.start=undefined;if(v===0||(v>0&&!x)){w.start=v}if(w.type==="ov"){w.end=A}w.base={};w.base.value=D[o];w.base.start=v;w.base.startIsPercent=x;if(w.type==="ov"){w.base.end=A;w.base.endIsPercent=E}if((v>0&&x)||(A>0&&E)){j=true}if(w.type==="in"){if(v===0){if(r===undefined){r=[]}r.push(w)}else{if(v===100&&x===true){if(d===undefined){d=[]}d.push(w)}else{if(v>0){if(g===undefined){g=[]}g.push(w)}else{c.error("Invalid ad slot start time: "+D[o])}}}}else{if(w.type==="ov"){if(t===undefined){t=[]}t.push(w)}else{c.error("Invalid slot type: "+D[o])}}}else{c.error("Invalid ad slot start time: "+D[o])}}else{c.error("Not enough params for ad slot: "+D[o])}}}else{c.log("Init AdMap "+B)}};m=function(i,y){var v,w,x;for(v=0;v<i.length;v+=1){w=i[v];x=w.base;if(x.startIsPercent===true&&x.start>0){w.start=x.start/100*y}if(w.type==="ov"){if(x.endIsPercent===true&&x.end>0){w.end=x.end/100*y}}}};k=function(i){if(e!==i){c.log("Content duration changed to d='"+i+"'");e=i;if(j){if(r!==undefined){m(r,i)}if(d!==undefined){m(d,i)}if(t!==undefined){m(t,i)}if(g!==undefined){m(g,i)}}}};q=function(){if(r===undefined){return undefined}if(a.pre===true&&p===true){return undefined}a.pre=true;return r};h=function(){if(d===undefined){return undefined}if(a.post===true&&p===true){return undefined}a.post=true;return d};f=function(y){var v,i,z,w,x;if(s!==y&&y>0){v=s;s=y;if(g!==undefined){for(i=0;i<g.length;i+=1){z=g[i];if(x===undefined){if(v<z.start&&z.start<=s&&(u===true||Math.abs(s-v)<=l)&&(!p||a["mid_"+i]!==true)){x=z.start;a["mid_"+i]=true;w=[z]}}else{if(x>0&&x===z.start){a["mid_"+i]=true;w.push(z)}}}}}return w};b=function(v){var i,w;if(t===undefined){return undefined}for(i=0;i<t.length;i+=1){w=t[i];if(w.start<=v&&v<w.end&&(!p||a["ov_"+i]!==true)){a["ov_"+i]=true;return w}}return undefined};c.es5.Object.defineProperties(c,{init:{value:function(i){return n(i)}},contentDuration:{get:function(){return e},set:function(i){k(i)}},enforceMidrolls:{get:function(){return u},set:function(i){u=i}},returnSlotOnce:{get:function(){return p},set:function(i){p=i}},getPrerolls:{value:function(){return q()}},getPostrolls:{value:function(){return h()}},getMidrolls:{value:function(i){return f(i)}},getOverlay:{value:function(i){return b(i)}}});if(Object.seal){Object.seal(c)}return c}}());(function(a){var d=LiveRail.Framework.descendent("JWPlayer"),e,f="lr_debug",c=(window.location.protocol==="https:"?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/js/LiveRail.AdManager-1.0.js",g=(window.location.protocol==="https:"?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/js/LiveRail.AdManager.JWPlayer-6.0.0.plugin.js",i=(window.location.protocol==="https:"?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/swf/v4/plugins/jwplayer/6.0/LiveRail.swf",b="2013-07-24 10:35",h=function(aw,ab,x){var C=0,ag=false,av,t,S,m,aI,aj,M,aK,aE,j,E,ai,Y,at,T,am,o,aJ,u,Q,B,p,K,y,G,U,aA,ah=false,an=false,aa=LiveRail.AdMap(),aB;d.log("LiveRail Plugin for JWPlayer 6.4.0 Build "+b);aE=document.createElement("div");aE.style.display="none";aE.className="lr_black_cover";aE.style.backgroundColor="rgba(0,0,0,1)";aE.style.cursor="default";aE.style.position="absolute";x.appendChild(aE);function ay(){if(aJ||Q||B){return true}return false}function al(){var aL=aw.container.getElementsByTagName("video")[0];return aL}function V(){if(!ah){d.log("player.detachMedia()");ah=true;aw.detachMedia()}}function H(){if(ah){ah=false;d.log("player.attachMedia(true)");aw.attachMedia(true)}}function af(){aj=document.createElement("div");aj.style.display="none";aj.className="lrcountdown";aj.style.backgroundColor="rgba(0,0,0,0.50)";aj.style.cursor="default";aj.style.position="absolute";M=document.createElement("div");M.style.display="block";M.style.className="lrcountdown-text";M.style.color="#DDD";M.style.fontSize="11px";M.style.padding="2px 5px 2px 5px";aj.appendChild(M);x.appendChild(aj)}function aC(){window.clearInterval(aK);if(aj){aj.style.display="none"}}function A(aN,aM){var aL,aO;for(aL in aN){if(aN.hasOwnProperty(aL)){aO=aL.toUpperCase();if(aO.substr(0,3)==="LR_"){if(aO==="LR_ADMAP"){m=aN[aL]}else{if(aO==="LR_LAYOUT_SKIN_MESSAGE"){if(aN[aL]){aI=aN[aL];if(!aj){af()}}}else{aM[aO]=aN[aL]}}}}}}function w(){d.info("Prepare for new video item content.");o=true;u=true;K=false}function z(){var aL=al(),aM=false;if(aL){d.log("forcing a video.pause() ");aL.pause();if(aL.src){aA=aL.src}else{aA=aL.currentSrc}if(aA){d.log("Retrieved main video src: "+aA);aM=true}else{d.error("Failed to retrieve video src property")}}else{d.error("Failed to retrieve JW video element!")}return aM}function ak(aL){d.log("Player force state: "+aL);an=true;aw.forceState(aL)}function aD(){if(an){d.log("Player release state!");an=false;aw.releaseState()}}function N(){var aL=aw.container.getElementsByClassName("jwcontrols")[0];if(aL){aL.style.display="none"}d.log("Disable player controls.",aL);aw.setControls(false)}function aH(){var aL=aw.container.getElementsByClassName("jwcontrols")[0];if(aL){aL.style.display=""}d.log("Enable player controls.",aL);aw.setControls(true)}function aF(aO){var aM,aN,aL=0;if(aO&&aO.length>0){for(aM=0;aM<aO.length;aM+=1){aN=aO.end(aM);if(aN>0&&aL<aN){aL=aN}}return aL}return 0}function I(aO){var aM=al(),aN=aO.toFixed(1),aL=aF(aM.seekable);U+=1;if(U>25){d.log("Seek fix has failed after 25 tries.");return}if(aM.currentTime>0){if(aL>0){if(aM.currentTime<aN){d.log("currentTime="+aM.currentTime+" > setting to "+aN);aM.currentTime=aN;if(aM.currentTime>(aN-1)){d.log("Seeked OK to currentTime="+aM.currentTime+". video.play()");aM.play();G=false;y=undefined}else{d.log("Seek failed! currentTime="+aM.currentTime);if(!G){G=true;d.log("video.pause()");aM.pause()}setTimeout(function(){I(y)},100)}}else{d.log("Device has auto seeked (?) cuurentTime="+aM.currentTime);aM.play();G=false;y=undefined}}else{d.log("Cannot seek yet. "+(aL>0?"canSeekMax="+aL:"not seekable"));if(!G&&aL>0){G=true;d.log("video.pause()");aM.pause()}setTimeout(function(){I(y)},100)}}else{setTimeout(function(){I(y)},100)}}function q(){var aL=al();d.log((ay()?" (AD) ":""),'video event "loadstart"');aL.removeEventListener("loadstart",q,false);d.log("player.play(true)");aw.play(true);if(y>0){U=0;setTimeout(function(){I(y)},100)}}function ao(){var aL=al();aC();aH();aD();if((B||aJ)&&p&&y>0){aL.addEventListener("loadstart",q,false)}if(aA&&p){d.log("Restore main video src "+aA);aL.src=aA;aL.load()}aA=undefined;H();if(aJ){d.log("Preroll state done. Release player.");aJ=false;d.log("videoObj.play()");aL.play()}else{if(Q){d.log("Postroll state done. Release player.");Q=false;if(ag){d.log("Postroll fix applied, videoObj.play()");aL.play()}}else{if(B){d.log("Midroll state done. Release player.");B=false;d.log("videoObj.play()");aL.play()}}}}function l(aL){var aN,aM;if(aL!==undefined&&aL.length>0){aN="";for(aM=0;aM<aL.length;aM+=1){if(aM>0){aN+=";"}aN+=aL[aM].type+":"+aL[aM].scenario+":0"}}return aN}function n(){var aM,aL;aM={slot:aw.container,videoSlot:al(),LR_INTEGRATION:"jw",LR_ENVIRONMENT:"html5"};for(aL in av){if(av.hasOwnProperty(aL)){aM[aL]=av[aL]}}return aM}function L(){if(aj){aj.style.width=at+"px"}}function Z(aL){aE.style.display="block";d.log("VPAID.initAd(",at,T,"normal",512,undefined,aL,")");j.initAd(at,T,"normal",512,undefined,aL)}function ax(){d.log("clearFlags()");aJ=false;B=false;Q=false;aA=undefined;y=undefined;p=false;ag=false}function ap(){var aL,aM;av={};aB=false;A(ab,av);if(t){d.log("Video item params",t);A(t,av)}if(av.hasOwnProperty("LR_DISABLED")&&av.LR_DISABLED!==undefined&&av.LR_DISABLED.toString()==="true"){aB=true;d.log("Found LR_DISABLED="+av.LR_DISABLED);return}d.log("Init AdMap "+m);if(m!==undefined){aa.init(m)}else{d.log('No LR_ADMAP specified, using default "in::0"');aa.init("in::0")}L();d.log("Check for pre-rolls");aL=l(aa.getPrerolls());if(aL){d.log("Requesting pre-rolls. LR_ADMAP="+aL);ax();aJ=true;z();V();ak(a.events.state.BUFFERING);N();aM=n();aM.LR_ADMAP=aL;aM.LR_VIDEO_POSITION="0";Z(aM)}else{d.log("No pre-rolls specified in the adMap.")}}function k(){var aM,aL;aM=aw.getPlaylistItem();aL=aw.getPlaylist();if(aL&&aL.length>1&&aM&&aM.hasOwnProperty("index")&&aM.index<(aL.length-1)){return false}return true}function ae(){var aL,aM;d.log("Check for post-rolls");if(u){if(aB){d.log("Ads disabled, prepare for new item");w()}else{if(k()){u=false;aL=l(aa.getPostrolls());if(aL){d.log("Requesting post-rolls. LR_ADMAP="+aL);ax();V();ak(a.events.state.BUFFERING);Q=true;z();N();aM=n();aM.LR_ADMAP=aL;aM.LR_VIDEO_POSITION="100%";Z(aM)}else{d.log("No post-rolls specified in the adMap.");if(K){w()}}}else{d.log("Not the last item in the playlist, post-rolls ignored.");w()}}}}function ar(aM,aO){var aL,aN;d.log("Requesting mid-rolls. LR_ADMAP="+aM);ax();B=true;z();y=aO;N();V();ak(a.events.state.BUFFERING);aN=n();aN.LR_ADMAP=aM;aN.LR_VIDEO_POSITION=aO;Z(aN)}function v(){d.log("VPAID Event AdLoaded");aD();aE.style.display="none";d.log("VPAID.startAd()");p=false;j.startAd()}function aG(){d.log("VPAID Event AdStopped");ao()}function r(aL){aD();aE.style.display="none";d.log("VPAID Event AdError",aL);ao()}function W(){d.log("VPAID Event AdStarted");p=true}function ad(){d.log("VPAID Event AdImpression")}function O(){}function R(){Y=true}function au(){Y=false}function J(){}function s(aL){d.error((ay()?" (AD) ":""),"onError() ",aL)}function az(aL){d.info((ay()?" (AD) ":""),"onPlay() ",aL);if(!ay()){if(K){d.log("New video item detected on play event");w()}if(o){o=false;if(E){d.info("Need prerolls, but LiveRail VPAID still loading (waiting)");ai=true}else{ap()}}}}function ac(aL){var aM;d.info((ay()?" (AD) ":""),"onPlaylistItem() ",aL);aM=aw.getPlaylistItem(aL.index);if(!ay()){d.log("Current JW video item ",aM);if(aL.index!==undefined&&S!==undefined&&aL.index!==S){d.log("Current video item changed to index "+aL.index+" from "+S);K=true}if(t&&aM){if(aM.hasOwnProperty("mediaid")&&t.hasOwnProperty("mediaid")&&aM.mediaid!==undefined&&t.mediaid!==undefined&&t.mediaid!==aM.mediaid){d.log("Current video item changed to mediaid="+aM.object_id+" from mediaid="+t.object_id);K=true}}}else{aM=aw.getPlaylistItem(aL.index);d.log("Pending JW video item ",aM);if(aM.hasOwnProperty("file")&&aM.file!==undefined){aA=aM.file;d.log("Pending video url: "+aA)}}S=aL.index;t=aM}function D(aL){d.info((ay()?" (AD) ":""),"onBeforeComplete() ",aL);if(!ay()){ae()}}function F(aN){var aL,aM;if(!ay()&&!aB&&aN.position>0){aL=aa.getMidrolls(aN.position);if(aL&&aL.length>0){d.info("onTime() ",aN);aM=l(aL);ar(aM,aN.position)}else{if(C>0&&u&&aN.duration>0&&(aN.position>aN.duration-C)&&k()){d.log("Fix: requesting postrolls sooner at "+aN.position+"/"+aN.duration);ag=true;ae()}}}}function X(){d.info("VPAID AdManager load complete");E=false;j.handshakeVersion("2.0");j.subscribe(v,"AdLoaded");j.subscribe(W,"AdStarted");j.subscribe(ad,"AdImpression");j.subscribe(aG,"AdStopped");j.subscribe(r,"AdError");j.subscribe(O,"AdDurationChange");j.subscribe(R,"AdPaused");j.subscribe(au,"AdPlaying");w();if(ai){d.info("VPAID late load. Requesting prerolls");ai=false;ap()}}function P(){d.error("VPAID AdManager load failed");E=false}function aq(aL){var aM;d.log("onReady()",aL);d.info('Player rendering mode is "'+aw.getRenderingMode()+'".');if(aw.renderingMode==="flash"){d.info("LiveRail Flash plugin loaded, HTML5 plugin disabled.");return}d.log("player ",aw);d.log("config ",ab);d.log("div ",x);d.info("LiveRail HTML5 Plugin loaded");aw.onPlaylistItem(ac);aw.onPlay(az);aw.onTime(F);aw.onBeforeComplete(D);aw.onError(s);aM=document.createElement("iframe");aM.style.display="none";aM.onload=function(){var aN=aM.contentWindow.document.createElement("script");aN.src=c;aN.onload=function(){if(e){aM.contentWindow.LiveRail.debugElement=e}d.debug("vpaidLoader.onload()");j=aM.contentWindow.getVPAIDAd();X()};aN.onerror=function(aO){d.error(arguments);P()};d.log("Adding VPAID loader frame");aM.contentWindow.document.body.appendChild(aN)};E=true;document.body.appendChild(aM)}aw.onReady(aq);this.resize=function(aM,aL){if((at!==aM||T!==aL)){at=aM;T=aL;aE.style.width=aM+"px";aE.style.height=aL+"px";d.log("resize() w="+aM+" h="+aL);L();x.style.zIndex=100000}}};e=document.getElementById(f);if(e){LiveRail.debugElement=e}d.log("jwplayer().registerPlugin()");a().registerPlugin(g,"6.4",h,i)}(jwplayer));